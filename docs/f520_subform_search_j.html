<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>検索サブフォーム</title>
    <link href="/AbDock/images/abdock.ico" rel="icon" type="image/ico" />
    <link href="/AbDock/stylesheets/normalize.css" rel="stylesheet" /><link href="/AbDock/stylesheets/all.css" rel="stylesheet" />
    <link href="/AbDock/stylesheets/mermaid.forest.min.css" rel="stylesheet" />
    <script src="/AbDock/javascripts/jquery-3.4.1.min.js"></script>
    <script src="/AbDock/javascripts/all.js"></script>
    <script src="/AbDock/javascripts/mermaid.min.js"></script>
  </head>
  <body class="f520_subform_search_j">
    <header>
  <table class="header">
    <colgroup>
      <col class="title"   />
      <col class="project" />
      <col class="appname" />
      <col class="subname" />
      <col class="version" />
    </colgroup>
    <tbody>
      <tr>
        <td class="title"   rowspan="2">画面設計</td>
        <td class="project" rowspan="2">project.mk</td>
        <td class="appname" rowspan="2">Abook</td>
          <td class="subname" rowspan="2">Jbook</td>
        <td class="version">バージョン</td>
      </tr>
      <tr>
          <td class="version-number">6.1.1</td>
      </tr>
    </tbody>
  </table>
</header>

    <div class="content">
      <h1>【検索サブフォーム】</h1>

<h2>レイアウト</h2>

<table class="layout">
    <tr>
      <td class="layout ">
        <figure>
            <img src="/AbDock/images/subform_search_j_001.png" class="layout " alt="" />
            <figcaption>
              1.初期表示
            </figcaption>
        </figure>
      </td>
        <td rowspan="1" class="overview">
          <figure>
            <figcaption>＜概要＞</figcaption>
              <ul class="overview">
                  <li>支出情報を検索するサブフォーム</li>
                  <li>名称コンボボックスには支出情報の名称が初期値設定される．</li>
                  <li>種別コンボボックスには支出タブで指定可能な種別(<a href="/AbDock/f600_type_define_j.html">種別※1</a>)が初期値設定される(未選択可能)．</li>
                  <li>名称コンボボックスから選択した名称と種別コンボボックスから 選択した種別に合致する支出情報を検索して表示する(AND検索)．</li>
                  <li>名称コンボボックスには直接名称を入力することも可能で，その場合は部分一致検索となる．</li>
              </ul>
              <figure>
                <figcaption>＜フォーム属性＞</figcaption>
                <table class="form-property">
                  <tr><th>タイトル          </th><td>支出検索</td></tr>
                    <tr><th>アイコン        </th><td>なし</td></tr>
                  <tr><th>画面サイズ        </th><td>(478, 346)</td></tr>
                  <tr><th>サイズ変更        </th><td>不可</td></tr>
                  <tr><th>初期表示位置      </th><td>呼び出し元画面中央</td></tr>
                  <tr><th>ウィンドウの最大化</th><td>不可</td></tr>
                  <tr><th>ウィンドウの最小化</th><td>不可</td></tr>
                </table>
              </figure>
              <figure>
                <figcaption>＜支出テーブルの設定＞</figcaption>
                <table class="dgv-property">
                  <tr><th>行追加        </th><td>不可</td></tr>
                  <tr><th>行削除        </th><td>不可</td></tr>
                  <tr><th>ReadOnly      </th><td>○</td></tr>
                  <tr><th>列のソート    </th><td>不可</td></tr>
                  <tr><th>列の幅変更    </th><td>不可</td></tr>
                  <tr><th>選択モード    </th><td>行選択</td></tr>
                  <tr><th>スクロールバー</th><td>縦のみ</td></tr>
                </table>
              </figure>
          </figure>
        </td>
    </tr>
</table>


<h2>初期表示</h2>
<ul class="description">
  <li><a href="/AbDock/f410_form_main_j.html">呼び出し元画面</a>から支出情報を受け取る．</li>
  <li>支出情報を名称で集約する(SQLでのGROUP BY)．</li>
  <li>
    集約した名称をソートして名称コンボボックスに設定する(先頭は空白とする)．<br />
    ※ソートは現在のカルチャ依存の自然順ソートとする．
    <table class="event">
      <tr>
        <td>
          <figure>
            <img src="/AbDock/images/subform_search_j_002.png" class="small" alt="" />
            <figcaption>2-1.支出情報</figcaption>
          </figure>
        </td>
        <td>
          <figure>
            <img src="/AbDock/images/subform_search_j_003.png" class="small" alt="" />
            <figcaption>2-2.名称コンボボックスのソート順</figcaption>
          </figure>
        </td>
      </tr>
    </table>
  </li>
  <li>
    種別コンボボックスを設定する(空白+<a href="/AbDock/f600_type_define_j.html">種別※1</a>)．
    <table class="subform-type-combo">
      <tr>
        <td>
          <figure>
            <img src="/AbDock/images/subform_search_j_004.png" class="small" alt="" />
            <figcaption>3-1.種別コンボボックス</figcaption>
          </figure>
        </td>
      </tr>
    </table>
  </li>
</ul>

<h2>名称コンボボックスへの直接入力</h2>
<ul class="description">
  <li>名称コンボボックスは直接入力可能とする．</li>
</ul>

<h2>検索ボタン押下</h2>
<ul class="description">
  <li>検索の方法が名称コンボボックスの選択状態によって2通りに分かれる．</li>
</ul>
<ol class="description">
  <li>
    名称コンボボックスから名称を選択している場合<br />
    選択された名称と一致する支出情報を支出テーブルへ表示する．
  </li>
  <li>
    名称コンボボックスへ直接入力している場合<br />
    直接入力されたワードと曖昧一致する支出情報を支出テーブルへ表示する(SQLでのLIKE '%[ワード]%')．
  </li>
  <table class="event">
    <tr>
      <td>
        <figure>
          <img src="/AbDock/images/subform_search_j_005.png" class="small" alt="" />
          <figcaption>4-1.一致検索</figcaption>
        </figure>
      </td>
      <td>
        <figure>
          <img src="/AbDock/images/subform_search_j_006.png" class="small" alt="" />
          <figcaption>4-2.曖昧検索</figcaption>
        </figure>
      </td>
    </tr>
  </table>
</ol>
<ul class="description">
  <li>
    種別コンボボックスを選択している場合，選択された種別が検索条件に追加される．(AND)
    <table class="event">
      <tr>
        <td>
          <figure>
            <img src="/AbDock/images/subform_search_j_007.png" class="small" alt="" />
            <figcaption>5-1.種別のみ</figcaption>
          </figure>
        </td>
        <td>
          <figure>
            <img src="/AbDock/images/subform_search_j_008.png" class="small" alt="" />
            <figcaption>5-2.名称と種別のAND検索</figcaption>
          </figure>
        </td>
      </tr>
    </table>
  </li>
</ul>
<ul class="description">
  <li>検索後の支出テーブルは先頭行までスクロールする．</li>
  <li>検索結果が存在しない場合は，支出テーブルはクリアされて何も表示されない．</li>
</ul>

<h2>ツールチップの表示</h2>
<ul class="description">
  <li>備考のある行にマウスオンしたとき，ツールチップを表示する．</li>
  <li>ツールチップには支出情報の備考を表示する．</li>
  <li>
    備考のある行は背景色を変更する(#DEFCE7)．
    <table class="subform-auto-complete">
      <tr>
        <td>
          <figure>
            <img src="/AbDock/images/subform_search_note_j.png" class="small" alt="" />
            <figcaption>6.ツールチップに備考を表示</figcaption>
          </figure>
        </td>
      </tr>
    </table>
  </li>
</ul>

    </div>
    <footer>
  <table class="footer">
    <tr>
      <td class="link">
          <a href="/AbDock/index_j.html">トップページ</a> | 
          <a href="https://github.com/m-kishi/Jbook">Jbook</a> | 
          <a href="/AbDock/">Abook設計書</a> |
        <a href="https://github.com/m-kishi/AbDock">GitHub</a>
      </td>
      <td class="copy-rights">
        &copy; 2016 Masaaki Kishi
      </td>
    </tr>
  </table>
</footer>

    <script>mermaid.initialize({startOnLoad:true});</script>
  </body>
</html>
